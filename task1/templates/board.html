{% extends "base.html" %}

{% block content %}
<h1 class="my-4">{{ board.name }}</h1>
<form action="{{ url_for('main.add_task_route', board_id=board._id) }}" method="POST" class="form-inline mb-4">
    <input type="text" name="task_name" placeholder="Enter task name" class="form-control mr-2">
    <select name="task_status" class="form-control mr-2">
        <option value="Backlog">Backlog</option>
        <option value="Work">Work</option>
        <option value="Review">Review</option>
        <option value="Done">Done</option>
    </select>
    <button type="submit" class="btn btn-success">Add Task</button>
</form>

<div class="kanban-board">
    <div class="kanban-column" id="backlog">
        <h2>Backlog</h2>
        <ul>
            {% for task in board.tasks if task.status == 'Backlog' %}
            <li class="d-flex justify-content-between align-items-center">
                {{ task.name }}
                <form action="{{ url_for('main.delete_task_route', board_id=board._id, task_id=task._id) }}" method="POST" class="m-0 p-0">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
            </li>
            {% endfor %}
        </ul>
    </div>
    <div class="kanban-column" id="work">
        <h2>Work</h2>
        <ul>
            {% for task in board.tasks if task.status == 'Work' %}
            <li class="d-flex justify-content-between align-items-center">
                {{ task.name }}
                <form action="{{ url_for('main.delete_task_route', board_id=board._id, task_id=task._id) }}" method="POST" class="m-0 p-0">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
            </li>
            {% endfor %}
        </ul>
    </div>
    <div class="kanban-column" id="review">
        <h2>Review</h2>
        <ul>
            {% for task in board.tasks if task.status == 'Review' %}
            <li class="d-flex justify-content-between align-items-center">
                {{ task.name }}
                <form action="{{ url_for('main.delete_task_route', board_id=board._id, task_id=task._id) }}" method="POST" class="m-0 p-0">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
            </li>
            {% endfor %}
        </ul>
    </div>
    <div class="kanban-column" id="done">
        <h2>Done</h2>
        <ul>
            {% for task in board.tasks if task.status == 'Done' %}
            <li class="d-flex justify-content-between align-items-center">
                {{ task.name }}
                <form action="{{ url_for('main.delete_task_route', board_id=board._id, task_id=task._id) }}" method="POST" class="m-0 p-0">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>

<a href="{{ url_for('main.index') }}" class="btn btn-secondary mt-4">Back to boards</a>
{% endblock %}
